{{ 'web3000-video-section.css' | asset_url | stylesheet_tag }}

{% if section.settings.landing_video %} 
<div class="landing-hero-logo-part-1">
  {% render 'HS_Hatice_part_1' %}
</div>
<div class="landing-hero-logo-part-2">
{% render 'HS_Hatice_part_2' %}
</div>
{% endif %}

{%- liquid
  assign autoVideo = section.settings.autoplay
-%}
<div class="video-section section-block-{{section.id}}{% if section.settings.bg_black %} bg-black{% endif %} {% if section.settings.full_width_video %} full-width-video {% endif %} {% if section.settings.landing_video %} landing-hero-media {% endif %}" 
    data-loader-script="{%- if autoVideo -%}{{ 'autoplay-video.js' | asset_url }}{%- else -%}{{ 'deferred-media.js' | asset_url }}{%- endif -%}">
  <div class="{% if section.settings.container == 'fullwidth' %}container-full{% elsif section.settings.container == '1770' %}container-1770{% elsif section.settings.container == '1170' %}container-1170{% else %}container{% endif %}">
      <noscript>
        <div class="video-section__media"
          {% if section.settings.cover_image != blank %} style="padding-bottom: {{ 1 | divided_by: section.settings.cover_image.aspect_ratio | times: 100 }}%;"{% endif %}
        >
          <a {% if section.settings.video_url == blank %} role="link" aria-disabled="true"{% else %} href="{{ section.settings.video_url }}"{% endif %} class="video-section__poster media media--transparent media--landscape{% if section.settings.cover_image == blank %} video-section__placeholder{% endif %}">
            {%- if section.settings.cover_image != blank -%}
              <img
                srcset="{%- if section.settings.cover_image.width >= 375 -%}{{ section.settings.cover_image | img_url: '375x' }} 375w,{%- endif -%}
                  {%- if section.settings.cover_image.width >= 750 -%}{{ section.settings.cover_image | img_url: '750x' }} 750w,{%- endif -%}
                  {%- if section.settings.cover_image.width >= 1100 -%}{{ section.settings.cover_image | img_url: '1100x' }} 1100w,{%- endif -%}
                  {%- if section.settings.cover_image.width >= 1500 -%}{{ section.settings.cover_image | img_url: '1500x' }} 1500w,{%- endif -%}
                  {%- if section.settings.cover_image.width >= 1780 -%}{{ section.settings.cover_image | img_url: '1780x' }} 1780w,{%- endif -%}
                  {%- if section.settings.cover_image.width >= 2000 -%}{{ section.settings.cover_image | img_url: '2000x' }} 2000w,{%- endif -%}
                  {%- if section.settings.cover_image.width >= 3000 -%}{{ section.settings.cover_image | img_url: '3000x' }} 3000w,{%- endif -%}
                  {%- if section.settings.cover_image.width >= 3840 -%}{{ section.settings.cover_image | img_url: '3840x' }} 3840w,{%- endif -%}
                  {{ section.settings.cover_image | img_url: 'master' }} {{ section.settings.cover_image.width }}w"
                src="{{ section.settings.cover_image | img_url: '1920x' }}"
                sizes="{% if section.settings.full_width %}100vw{% else %}(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 100 }}px, (min-width: 750px) calc(100vw - 10rem), 100vw{% endif %}"
                alt="{{ 'sections.video.load_video' | t: description: section.settings.description | escape }}"
                loading="lazy"
                width="{{ section.settings.cover_image.width }}"
                height="{{ section.settings.cover_image.height }}"
              >
            {%- else -%}
              {{ 'collection-2' | placeholder_svg_tag: 'placeholder-svg placeholder' }}
            {%- endif -%}
          </a>
        </div>
      </noscript>
      <deferred-media class="video-section__media deferred-media no-js-hidden{% if settings.banner_animation == 'effect_fade_up' %} scroll-trigger animate--slide-in{% endif %}" data-media-id="{{ section.settings.video_url.id }}">
        <button
          id="Deferred-Poster-Modal-{{ section.settings.video_url.id }}"
          class="video-section__poster media deferred-media__poster media--landscape"
          type="button"
          {% if autoVideo %}
            style="display: none"
          {% endif %}
        >
          {%- if section.settings.cover_image != blank -%}
            <img
              srcset="{%- if section.settings.cover_image.width >= 375 -%}{{ section.settings.cover_image | img_url: '375x' }} 375w,{%- endif -%}
                {%- if section.settings.cover_image.width >= 750 -%}{{ section.settings.cover_image | img_url: '750x' }} 750w,{%- endif -%}
                {%- if section.settings.cover_image.width >= 1100 -%}{{ section.settings.cover_image | img_url: '1100x' }} 1100w,{%- endif -%}
                {%- if section.settings.cover_image.width >= 1500 -%}{{ section.settings.cover_image | img_url: '1500x' }} 1500w,{%- endif -%}
                {%- if section.settings.cover_image.width >= 1780 -%}{{ section.settings.cover_image | img_url: '1780x' }} 1780w,{%- endif -%}
                {%- if section.settings.cover_image.width >= 2000 -%}{{ section.settings.cover_image | img_url: '2000x' }} 2000w,{%- endif -%}
                {%- if section.settings.cover_image.width >= 3000 -%}{{ section.settings.cover_image | img_url: '3000x' }} 3000w,{%- endif -%}
                {%- if section.settings.cover_image.width >= 3840 -%}{{ section.settings.cover_image | img_url: '3840x' }} 3840w,{%- endif -%}
                {{ section.settings.cover_image | img_url: 'master' }} {{ section.settings.cover_image.width }}w"
              src="{{ section.settings.cover_image | img_url: '1920x' }}"
              sizes="{% if section.settings.full_width %}100vw{% else %}(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 100 }}px, (min-width: 750px) calc(100vw - 10rem), 100vw{% endif %}"
              alt="{{ 'sections.video.load_video' | t: description: section.settings.description | escape }}"
              loading="lazy"
              width="{{ section.settings.cover_image.width }}"
              height="{{ section.settings.cover_image.height }}"
            >
          {%- else -%}
            <div class="not_img" style="--height_not_img: 100%">
              {{ 'collection-2' | placeholder_svg_tag: 'placeholder-svg placeholder' }}
            </div>
          {%- endif -%}
          <span class="deferred-media__poster-button motion-reduce">
            {%- render 'icon-play' -%}
          </span>
        </button>
        <{%- if autoVideo -%}div{%- else -%}template{%- endif -%}>
            <div class="video-container">
              {% if section.settings.video_mp4 != blank %}
                {% if section.settings.video_mp4_mobile != blank  %}
                  <video class="web3000-video js-video hide-large" playsinline preload="none" {% if autoVideo %}autoplay loop muted {% else %}controls{% endif %}>
                    <source src="{{ section.settings.video_mp4_mobile.sources[1].url }}" type="video/mp4">
                  </video>
                  <video class="web3000-video js-video hide-small" playsinline preload="none" {% if autoVideo %}autoplay loop muted {% else %}controls{% endif %}>
                    <source src="{{ section.settings.video_mp4.sources[1].url }}" type="video/mp4">
                  </video>
                {% else %}
                  <video class="web3000-video js-video" playsinline preload="none" {% if autoVideo %}autoplay loop muted {% else %}controls{% endif %}>
                    <source src="{{ section.settings.video_mp4.sources[1].url }}" type="video/mp4">
                  </video>
                {% endif %}
            {% else if section.settings.url_mp4 != blank %}
                <video class="web3000-video js-video" playsinline preload="none" {% if autoVideo %}autoplay loop muted {% else %}controls{% endif %}>
                    <source src="{{ section.settings.url_mp4 }}" type="video/mp4">
                </video>
            {% endif %}
            </div>
        </{%- if autoVideo -%}div{%- else -%}template{%- endif -%}>
      </deferred-media>
  </div>
</div>

{% schema %}
{
  "name": "web3000 Video",
  "class": "web3000-video-block",
  "tag": "section",
  "settings": [
    {
      "type": "image_picker",
      "id": "cover_image",
      "label": "t:sections.video.settings.cover_image.label"
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "t:sections.video.settings.autoplay.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "bg_black",
      "label": "Black Background",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "full_width_video",
      "label": "Full Width",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "landing_video",
      "label": "Landing Page Video",
      "default": false
    },
    {
      "type": "video",
      "id": "video_mp4",
      "label": "Video mp4 File"
    },
    {
      "type": "video",
      "id": "video_mp4_mobile",
      "label": "Mobile Video mp4 File"
    },
    {
      "type": "url",
      "id": "url_mp4",
      "label": "External mp4 URL"
    }
  ],
  "presets": [
    {
      "name": "web3000 Video"
    }
  ]
}
{% endschema %}
